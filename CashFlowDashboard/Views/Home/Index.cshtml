@model CashFlowDashboard.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
}

<div class="flex flex-col gap-6">
    <!-- Metrics Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 lg:gap-6">
        <!-- Card 1 -->
        <div class="bg-surface-light dark:bg-surface-dark p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-subtle hover:shadow-card transition-shadow">
            <div class="flex justify-between items-start mb-4">
                <div class="p-2 bg-green-50 dark:bg-green-900/20 rounded-lg">
                    <span class="material-symbols-outlined text-green-600 dark:text-green-400">account_balance</span>
                </div>
                <span class="flex items-center text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-full">+4.2%</span>
            </div>
            <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Total Cash Balance</p>
            <h3 class="text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight">$1,240,500</h3>
        </div>
        <!-- Card 2 -->
        <div class="bg-surface-light dark:bg-surface-dark p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-subtle hover:shadow-card transition-shadow">
            <div class="flex justify-between items-start mb-4">
                <div class="p-2 bg-primary/10 rounded-lg">
                    <span class="material-symbols-outlined text-primary">payments</span>
                </div>
                <span class="flex items-center text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full">Last 30d</span>
            </div>
            <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Net Cash Flow</p>
            <h3 class="text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight">$85,200</h3>
        </div>
        <!-- Card 3 -->
        <div class="bg-surface-light dark:bg-surface-dark p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-subtle hover:shadow-card transition-shadow">
            <div class="flex justify-between items-start mb-4">
                <div class="p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
                    <span class="material-symbols-outlined text-purple-600 dark:text-purple-400">trending_up</span>
                </div>
                <span class="flex items-center text-xs font-bold text-purple-600 bg-purple-50 dark:bg-purple-900/20 px-2 py-1 rounded-full">Projected</span>
            </div>
            <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Forecast Growth</p>
            <h3 class="text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight">+12.5%</h3>
        </div>
        <!-- Card 4 -->
        <div class="bg-surface-light dark:bg-surface-dark p-6 rounded-xl border border-slate-200 dark:border-slate-800 shadow-subtle hover:shadow-card transition-shadow">
            <div class="flex justify-between items-start mb-4">
                <div class="p-2 bg-red-50 dark:bg-red-900/20 rounded-lg">
                    <span class="material-symbols-outlined text-red-600 dark:text-red-400">warning</span>
                </div>
                <span class="flex items-center text-xs font-bold text-red-600 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded-full">Action Needed</span>
            </div>
            <p class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Active Alerts</p>
            <h3 class="text-2xl lg:text-3xl font-bold text-slate-900 dark:text-white tracking-tight">3 Items</h3>
        </div>
    </div>

    <!-- Complex Grid Layout for Charts & Lists -->
    <div class="grid grid-cols-1 xl:grid-cols-3 gap-6 h-full">
        <!-- Main Chart Area (2/3 width) -->
        <div class="xl:col-span-2 bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-subtle flex flex-col">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8">
                <div>
                    <h3 class="text-lg font-bold text-slate-900 dark:text-white">Cash Flow Analysis</h3>
                    <p class="text-sm text-slate-500">Inflow vs Outflow over the last 6 months</p>
                </div>
                <div class="flex items-center gap-2 bg-slate-100 dark:bg-slate-800 p-1 rounded-lg self-start">
                    <button class="px-3 py-1.5 text-xs font-bold bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm rounded-md">6M</button>
                    <button class="px-3 py-1.5 text-xs font-medium text-slate-500 hover:text-slate-700 dark:hover:text-slate-300">1Y</button>
                    <button class="px-3 py-1.5 text-xs font-medium text-slate-500 hover:text-slate-700 dark:hover:text-slate-300">All</button>
                </div>
            </div>
            <!-- Large Chart Container -->
            <div class="flex-1 w-full min-h-[300px] relative">
                <svg class="w-full h-full overflow-visible" preserveaspectratio="none" viewbox="0 0 800 300">
                    <!-- Grid Lines -->
                    <line class="dark:stroke-slate-700" stroke="#e2e8f0" stroke-dasharray="4 4" stroke-width="1" x1="0" x2="800" y1="250" y2="250"></line>
                    <line class="dark:stroke-slate-700" stroke="#e2e8f0" stroke-dasharray="4 4" stroke-width="1" x1="0" x2="800" y1="175" y2="175"></line>
                    <line class="dark:stroke-slate-700" stroke="#e2e8f0" stroke-dasharray="4 4" stroke-width="1" x1="0" x2="800" y1="100" y2="100"></line>
                    <line class="dark:stroke-slate-700" stroke="#e2e8f0" stroke-dasharray="4 4" stroke-width="1" x1="0" x2="800" y1="25" y2="25"></line>
                    <!-- Gradient Definition -->
                    <defs>
                        <lineargradient id="chartGradient" x1="0" x2="0" y1="0" y2="1">
                            <stop offset="0%" stop-color="#266c73" stop-opacity="0.2"></stop>
                            <stop offset="100%" stop-color="#266c73" stop-opacity="0"></stop>
                        </lineargradient>
                    </defs>
                    <!-- Area Fill (Teal) -->
                    <path d="M0,200 C100,200 150,100 250,120 C350,140 400,180 500,150 C600,120 650,50 800,80 V250 H0 Z" fill="url(#chartGradient)"></path>
                    <!-- Line Path 1 (Teal - Inflow) -->
                    <path d="M0,200 C100,200 150,100 250,120 C350,140 400,180 500,150 C600,120 650,50 800,80" fill="none" stroke="#266c73" stroke-linecap="round" stroke-width="3"></path>
                    <!-- Line Path 2 (Gray - Outflow) -->
                    <path d="M0,220 C80,230 180,210 260,220 C360,232 420,240 520,210 C620,180 680,150 800,160" fill="none" stroke="#94a3b8" stroke-dasharray="6 6" stroke-linecap="round" stroke-width="2"></path>
                    <!-- Data Points Hover Effect Simulation -->
                    <circle class="dark:stroke-slate-800" cx="500" cy="150" fill="#266c73" r="6" stroke="white" stroke-width="2"></circle>
                    <rect fill="#1e293b" height="36" rx="6" width="80" x="460" y="100"></rect>
                    <text fill="white" font-size="12" font-weight="bold" text-anchor="middle" x="500" y="122">$184k</text>
                </svg>
            </div>
            <!-- X Axis Labels -->
            <div class="flex justify-between mt-4 text-xs font-medium text-slate-400">
                <span>Jan</span>
                <span>Feb</span>
                <span>Mar</span>
                <span>Apr</span>
                <span>May</span>
                <span>Jun</span>
            </div>
        </div>

        <!-- Right Column (1/3 width) - Stacked -->
        <div class="flex flex-col gap-6">
            <!-- Mini Forecast Chart -->
            <div class="bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-subtle">
                <h4 class="text-base font-bold text-slate-900 dark:text-white mb-4">Q3 Forecast Preview</h4>
                <div class="flex items-end justify-between h-[160px] gap-2 px-2">
                    <div class="w-full flex flex-col justify-end gap-2 group cursor-pointer">
                        <div class="w-full bg-slate-100 dark:bg-slate-700 rounded-t-sm h-[40%] group-hover:bg-slate-200 transition-colors relative"></div>
                        <div class="w-full bg-primary rounded-t-sm h-[30%] group-hover:bg-primary-dark transition-colors"></div>
                        <span class="text-xs text-center text-slate-400 font-medium">Jul</span>
                    </div>
                    <div class="w-full flex flex-col justify-end gap-2 group cursor-pointer">
                        <div class="w-full bg-slate-100 dark:bg-slate-700 rounded-t-sm h-[60%] group-hover:bg-slate-200 transition-colors"></div>
                        <div class="w-full bg-primary rounded-t-sm h-[80%] group-hover:bg-primary-dark transition-colors relative">
                            <div class="absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">Goal Met</div>
                        </div>
                        <span class="text-xs text-center text-slate-400 font-medium">Aug</span>
                    </div>
                    <div class="w-full flex flex-col justify-end gap-2 group cursor-pointer">
                        <div class="w-full bg-slate-100 dark:bg-slate-700 rounded-t-sm h-[45%] group-hover:bg-slate-200 transition-colors"></div>
                        <div class="w-full bg-primary rounded-t-sm h-[50%] group-hover:bg-primary-dark transition-colors"></div>
                        <span class="text-xs text-center text-slate-400 font-medium">Sep</span>
                    </div>
                </div>
                <div class="mt-4 flex gap-4 justify-center text-xs text-slate-500">
                    <div class="flex items-center gap-1.5">
                        <div class="w-2 h-2 rounded-full bg-primary"></div> Actuals
                    </div>
                    <div class="flex items-center gap-1.5">
                        <div class="w-2 h-2 rounded-full bg-slate-200 dark:bg-slate-600"></div> Projected
                    </div>
                </div>
            </div>

            <!-- Alerts & Notifications Panel -->
            <div class="bg-surface-light dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-slate-800 p-0 shadow-subtle flex-1 flex flex-col overflow-hidden">
                <div class="p-5 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50">
                    <h4 class="text-base font-bold text-slate-900 dark:text-white">Recent Alerts</h4>
                    <button class="text-xs text-primary font-bold hover:underline">View All</button>
                </div>
                <div class="flex-1 overflow-y-auto p-2">
                    <!-- Alert Item 1 -->
                    <div class="flex gap-3 p-3 hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg transition-colors cursor-pointer group">
                        <div class="mt-1 flex-shrink-0">
                            <span class="material-symbols-outlined text-red-500 text-sm p-1.5 bg-red-100 dark:bg-red-900/30 rounded-full">priority_high</span>
                        </div>
                        <div class="flex flex-col gap-1 min-w-0">
                            <div class="flex justify-between items-start">
                                <p class="text-sm font-semibold text-slate-800 dark:text-slate-200 truncate group-hover:text-primary transition-colors">Unusual Withdrawal</p>
                                <span class="text-[10px] text-slate-400 whitespace-nowrap">10m ago</span>
                            </div>
                            <p class="text-xs text-slate-500 line-clamp-1">Large transfer detected to unknown account ending in 4421.</p>
                        </div>
                    </div>
                    <!-- Alert Item 2 -->
                    <div class="flex gap-3 p-3 hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg transition-colors cursor-pointer group">
                        <div class="mt-1 flex-shrink-0">
                            <span class="material-symbols-outlined text-amber-500 text-sm p-1.5 bg-amber-100 dark:bg-amber-900/30 rounded-full">schedule</span>
                        </div>
                        <div class="flex flex-col gap-1 min-w-0">
                            <div class="flex justify-between items-start">
                                <p class="text-sm font-semibold text-slate-800 dark:text-slate-200 truncate group-hover:text-primary transition-colors">Q3 Tax Payment Due</p>
                                <span class="text-[10px] text-slate-400 whitespace-nowrap">Tomorrow</span>
                            </div>
                            <p class="text-xs text-slate-500 line-clamp-1">Upcoming scheduled payment of $12,400.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
